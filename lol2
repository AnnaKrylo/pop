import csv
import json

def read_wishes(filename):
    wishes = []
    with open(filename, 'r', newline='') as file:
        reader = csv.DictReader(file, delimiter='_')
        for row in reader:
            wishes.append(row)
    return wishes

def write_witchcraft(witchcraft_list, filename):
    with open(filename, 'w') as file:
        json.dump(witchcraft_list, file, indent=4)

def main():
    wishes = read_wishes('wishes.csv')
    witchcraft_list = []
    for person in wishes:
        if len(person['wish1'].split()) <= 3 and len(person['wish2'].split()) <= 3 and len(person['wish3'].split()) <= 3:
            witchcraft_list.append({'name': person['name'], 'age': person['age']})
    write_witchcraft(witchcraft_list, 'witchcraft.json')

if __name__ == "__main__":
    main()
